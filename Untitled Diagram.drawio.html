<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>draw.io</title>
<meta http-equiv="refresh" content="0;URL='https://app.diagrams.net/#Hviveknitrr2021%2FCountDownTimer%2Fmain%2FUntitled%20Diagram.drawio.html#%7B%22pageId%22%3A%22QNJAHbdH4pntQ86KgiFR%22%7D'"/>
<meta charset="utf-8"/>
</head>
<body>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\&quot; version=\&quot;26.2.13\&quot; pages=\&quot;4\&quot;&gt;&lt;diagram name=\&quot;Page-1\&quot; id=\&quot;fjbO9wSnigPpwt4bCEX0\&quot;&gt;&lt;mxGraphModel dx=\&quot;1871\&quot; dy=\&quot;535\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;827\&quot; pageHeight=\&quot;1169\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-8\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-2\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-3\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-2\&quot; value=\&quot;User\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;20\&quot; y=\&quot;200\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-9\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-3\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-4\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-44\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-3\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-2\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-3\&quot; value=\&quot;LB\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;130\&quot; y=\&quot;195\&quot; width=\&quot;80\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-4\&quot; value=\&quot;API Services\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;270\&quot; y=\&quot;80\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-5\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;280\&quot; y=\&quot;90\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-33\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-6\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-30\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-34\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-6\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-31\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-43\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-6\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-3\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-6\&quot; value=\&quot;API Services\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;294\&quot; y=\&quot;100\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-19\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-10\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-11\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-10\&quot; value=\&quot;Upload Service\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;70\&quot; y=\&quot;330\&quot; width=\&quot;110\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-18\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-11\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-13\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-20\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-11\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-12\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-11\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;240\&quot; y=\&quot;360\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-12\&quot; value=\&quot;Transcoding storage\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;430\&quot; y=\&quot;370\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-17\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-13\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-14\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-13\&quot; value=\&quot;Compeletion Queue\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;390\&quot; y=\&quot;260\&quot; width=\&quot;120\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-39\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-14\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-30\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-41\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-14\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-31\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-14\&quot; value=\&quot;completion Handlers\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;560\&quot; y=\&quot;270\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-25\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-22\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-2\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-22\&quot; value=\&quot;CDN\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-80\&quot; y=\&quot;270\&quot; width=\&quot;90\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-24\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.371;entryY=1.08;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-12\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-22\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-26\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;80\&quot; y=\&quot;310\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-27\&quot; value=\&quot;Uploading Service\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;90\&quot; y=\&quot;300\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-63\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-29\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-47\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-29\&quot; value=\&quot;Transcoding Servers\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;250\&quot; y=\&quot;370\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-30\&quot; value=\&quot;MetaData Cache\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;480\&quot; y=\&quot;10\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-31\&quot; value=\&quot;Metadata db\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;480\&quot; y=\&quot;135\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-45\&quot; value=\&quot;Upload Flow\&quot; style=\&quot;shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-130\&quot; y=\&quot;20\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-54\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-47\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-50\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-56\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-47\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-48\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-57\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-47\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-49\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-47\&quot; value=\&quot;Original Video\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-95\&quot; y=\&quot;670\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-48\&quot; value=\&quot;metadata\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;120\&quot; y=\&quot;800\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-59\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-49\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-52\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-49\&quot; value=\&quot;Audio\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;120\&quot; y=\&quot;680\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-58\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-50\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-51\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-50\&quot; value=\&quot;Video\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;130\&quot; y=\&quot;555\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-60\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-51\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-53\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-51\&quot; value=\&quot;Tasks:&amp;lt;div&amp;gt;1. Inspection&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. video Transcoding&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;3. Thumbnail&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;4. Watermark&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;340\&quot; y=\&quot;500\&quot; width=\&quot;120\&quot; height=\&quot;110\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-61\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-52\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-53\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-52\&quot; value=\&quot;Audio Encoding\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;330\&quot; y=\&quot;680\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-53\&quot; value=\&quot;Assemble\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;540\&quot; y=\&quot;620\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-83\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-64\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-65\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-64\&quot; value=\&quot;Preprocessing\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-130\&quot; y=\&quot;1060\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-84\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-65\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-65\&quot; value=\&quot;Dag Scheduler\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;25\&quot; y=\&quot;1060\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-77\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-66\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-70\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-66\&quot; value=\&quot;Task Workers\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;640\&quot; y=\&quot;1060\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-93\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-94\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-14\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-67\&quot; value=\&quot;Encoded Video\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;810\&quot; y=\&quot;1060\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-92\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-67\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot; value=\&quot;Task Scheduler&amp;lt;div&amp;gt;(Run tasks)&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;320\&quot; y=\&quot;1140\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-80\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-69\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-69\&quot; value=\&quot;Task Queue.&amp;amp;nbsp;&amp;lt;div&amp;gt;(get highest priority task)&amp;lt;/div&amp;gt;\&quot; style=\&quot;shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;160\&quot; y=\&quot;950\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-70\&quot; value=\&quot;Worker Queue&amp;lt;div&amp;gt;( get optimal worker)&amp;lt;/div&amp;gt;\&quot; style=\&quot;shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;330\&quot; y=\&quot;950\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-71\&quot; value=\&quot;Running Queue\&quot; style=\&quot;shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;480\&quot; y=\&quot;950\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-72\&quot; value=\&quot;Encoder\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;550\&quot; y=\&quot;1100\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-73\&quot; value=\&quot;Encryption\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;680\&quot; y=\&quot;1100\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-87\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-67\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-85\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;900\&quot; y=\&quot;1118\&quot;/&gt;&lt;mxPoint x=\&quot;887\&quot; y=\&quot;1118\&quot;/&gt;&lt;mxPoint x=\&quot;887\&quot; y=\&quot;1210\&quot;/&gt;&lt;mxPoint x=\&quot;890\&quot; y=\&quot;1210\&quot;/&gt;&lt;mxPoint x=\&quot;890\&quot; y=\&quot;1335\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-74\&quot; value=\&quot;Watermark attacher\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;610\&quot; y=\&quot;1150\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-78\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.992;entryY=0.647;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-72\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-81\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.578;entryY=-0.007;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-70\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-82\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0.132;entryY=1.08;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-71\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-90\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-85\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-88\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-85\&quot; value=\&quot;Temp Storage\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;130\&quot; y=\&quot;1290\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-88\&quot; value=\&quot;Object store and cdn uploaders\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-100\&quot; y=\&quot;1290\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-95\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-67\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-94\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;870\&quot; y=\&quot;1060\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;680\&quot; y=\&quot;315\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-94\&quot; value=\&quot;Completion Queue (distributed mq)\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;810\&quot; y=\&quot;560\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-100\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-96\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-68\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-104\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-96\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-102\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-96\&quot; value=\&quot;Retry Mechanism\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;10\&quot; y=\&quot;1210\&quot; width=\&quot;200\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-98\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.217;entryY=0.053;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-65\&quot; target=\&quot;pYmsRxoiTLYEHe79YGAV-96\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-105\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;pYmsRxoiTLYEHe79YGAV-102\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;700\&quot; y=\&quot;70\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;pYmsRxoiTLYEHe79YGAV-102\&quot; value=\&quot;Failure Handling\&quot; style=\&quot;shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-230\&quot; y=\&quot;1190\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;diagram id=\&quot;iG2mqhtm6K-9iEykfEnL\&quot; name=\&quot;Page-2\&quot;&gt;&lt;mxGraphModel dx=\&quot;1871\&quot; dy=\&quot;535\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;827\&quot; pageHeight=\&quot;1169\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-1\&quot; value=\&quot;Functional Req:&amp;lt;div&amp;gt;1. Upload File&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. Download File&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;3. automatically Sync files from local storage&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Non Functional Req:&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;1. Prioritize what from cap, eventual consistency so we need availability&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. low latency uploads and downloads&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;3. should support large file(Resumable chunkable uploads)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;4. High data integrity, sync accuracy&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;5. Reconciliation periodic&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Core Entities &amp;amp;amp; Api&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;1. File (stored in s3)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. metadata for those files&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;3. Users&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;/api/v1/upload&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;post{ file &amp;amp;amp; file metadata a multipart upload}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;get&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;/api/get/file&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;get&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;/api/v1/changes?since{timestamps:fiileIds[]}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;authentication using seesion or jwt token included in the requests&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;20\&quot; y=\&quot;30\&quot; width=\&quot;510\&quot; height=\&quot;380\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-51\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-50\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font style=&amp;quot;font-size: 14px;&amp;quot;&amp;gt;Client App&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;div&amp;gt;Whenever file changes based on manual button or if client is allowed sync it can start at regular intervals 2 min maybe a local list of changed file and executor service calling our upload api multiple times (Local DB for ease more discussion)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;Local Folder&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;1. Remote Changes&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Pull in changes&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. Local changed&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Sync changes to upstream&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Windows API&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;FileSystemWatcher&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;MAc&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;mcWatcher Service&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-60\&quot; y=\&quot;570\&quot; width=\&quot;220\&quot; height=\&quot;320\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-39\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-3\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-3\&quot; value=\&quot;Load Balancer (level 7 application lb)&amp;lt;div&amp;gt;&amp;amp;amp; Api gateway&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;gt;rate limiting&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;gt;routing&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;gt;SSl temination&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;gt;authentication&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;220\&quot; y=\&quot;550\&quot; width=\&quot;120\&quot; height=\&quot;405\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-5\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.003;entryY=0.45;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-3\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-6\&quot; value=\&quot;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;460\&quot; y=\&quot;540\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-14\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-6\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;340\&quot; y=\&quot;650\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;440\&quot; y=\&quot;650\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-15\&quot; value=\&quot;Upload\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-14\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-49\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-16\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;760\&quot; y=\&quot;430\&quot;/&gt;&lt;mxPoint x=\&quot;-5\&quot; y=\&quot;430\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-16\&quot; value=\&quot;Blob Store(S3)\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;640\&quot; y=\&quot;410\&quot; width=\&quot;240\&quot; height=\&quot;120\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-26\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-17\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-18\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-17\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px;&amp;quot;&amp;gt;Metadata Cache&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;div&amp;gt;FileId&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;File Type&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;MimeType&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Size&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;SS link&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Version&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;last updated at&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Chunk key(list chunk items (id, status))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;... metadata&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;610\&quot; y=\&quot;660\&quot; width=\&quot;120\&quot; height=\&quot;170\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-18\&quot; value=\&quot;Metdata Db(Relational)\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;820\&quot; y=\&quot;660\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-25\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-19\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-17\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-19\&quot; value=\&quot;&amp;#10;&amp;lt;span style=&amp;quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(236, 236, 236); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;&amp;quot;&amp;gt;File Service&amp;lt;/span&amp;gt;&amp;#10;&amp;#10;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;470\&quot; y=\&quot;550\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-20\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=0.415;entryY=1.003;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-16\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;590\&quot; y=\&quot;600\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;710\&quot; y=\&quot;520\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-21\&quot; value=\&quot;Upload Check and verify&amp;amp;nbsp;&amp;lt;div&amp;gt;with s3 for status&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;can be done using s3 notification&amp;lt;/div&amp;gt;\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-20\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;6\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-22\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-6\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;650\&quot; y=\&quot;480\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;770\&quot; y=\&quot;400\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-23\&quot; value=\&quot;UUID file id\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-22\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-31\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=1.023;exitY=0.363;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.34;entryY=1.013;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-3\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-19\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;360\&quot; y=\&quot;680\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;460\&quot; y=\&quot;680\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-32\&quot; value=\&quot;Get File\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-31\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-33\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1.017;entryY=0.302;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-19\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-3\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;360\&quot; y=\&quot;680\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;460\&quot; y=\&quot;680\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-34\&quot; value=\&quot;API resp\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-33\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-36\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=0.417;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;edgeStyle=orthogonalEdgeStyle;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-16\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-50.00000000000004\&quot; y=\&quot;590.2\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;545.8075201599568\&quot; y=\&quot;420.0004234163213\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;90\&quot; y=\&quot;480\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-37\&quot; value=\&quot;File Download from s3&amp;lt;div&amp;gt;file upload directly to s3 after metadata calls are done from below flow&amp;amp;nbsp;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;after getting presigned url let&#39;s say&amp;lt;/div&amp;gt;\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-36\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;5\&quot; y=\&quot;-30\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-40\&quot; value=\&quot;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;450\&quot; y=\&quot;870\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-41\&quot; value=\&quot;Sync Service\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;460\&quot; y=\&quot;895\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-42\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=0.422;entryY=1.013;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.417;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-40\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-19\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;360\&quot; y=\&quot;780\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;460\&quot; y=\&quot;780\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-43\&quot; value=\&quot;get Changes\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;wg8OID8uv9zO8fGLdXCj-42\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-20\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-44\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1.005;exitY=0.547;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-3\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-40\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;390\&quot; y=\&quot;810\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;440\&quot; y=\&quot;760\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-45\&quot; value=\&quot;1. for high availability and durability(s3 automatically does that infact it has a number lets say 3 1&amp;lt;div&amp;gt;primary upload than two secondary replication preferably in different datacenters across globe for redundancy before giving notification for successful upload eventual consistency model is followed&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. Chunking will help us to use the bandwidth optimally and parallelism, additionally use mq for burst handling to decouple producer and consumer for independent scaling.&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;3. CDN particularly might not be helpful in this case as user downloading their own file&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;4. Compression for certain file types can be done in client side so as to speed up download and upload&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;5. for sync we can talk about long polling , websocket but a scheduledExecutor is the best approach probably&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;6. Delta sync is an imp point we can talk about in both uploads and download wherin only the changed chunk get uploaded or downloaded&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;7.Talk about metric analysis and distributed tracing&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;8. for sync we can have an event bus with cursors (which file is changed ) being published in say (kafka) each for a device and those all events can be played in order to update and sync things up&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;it will give us way to handle network failures and multi device capability also more complexity for rollbacks and snapshot things&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-650\&quot; y=\&quot;100\&quot; width=\&quot;530\&quot; height=\&quot;310\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-52\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;wg8OID8uv9zO8fGLdXCj-50\&quot; target=\&quot;wg8OID8uv9zO8fGLdXCj-2\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;wg8OID8uv9zO8fGLdXCj-50\&quot; value=\&quot;chunking for resumable uploads&amp;lt;div&amp;gt;+&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Retry mechanism for failed packets&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;+&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;These are synced with our metadata table and done via file service usual request path with metadata db having extra chunk table to handle things&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;How to identify chunks better to use fingerprinting&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;checksum calculation using sha or any such algo&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;whenever a chunk upload is completed since now we are doing direct upload to s3 we will get notif from s3 than we make call to fileservice to update metadata store(but stll trust but verify)&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-310\&quot; y=\&quot;670\&quot; width=\&quot;150\&quot; height=\&quot;390\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;diagram id=\&quot;gnG0Zg1cOcav8hLs-Vn7\&quot; name=\&quot;Page-3\&quot;&gt;&lt;mxGraphModel dx=\&quot;1871\&quot; dy=\&quot;535\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;827\&quot; pageHeight=\&quot;1169\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-1\&quot; value=\&quot;1. Functional Req.&amp;lt;div&amp;gt;crawl the full web using seed urls&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;extract text data and store&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2. Non functional requirements.&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;fault tolerant&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;politeness not hit the same website many times&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;scale&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;efficiency&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Assumptions/ scale:&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;10 bil pages&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2mb per page&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2 * 10 bil mb&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2* 10mil gb&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2*1k tb&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;2 pb&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;30\&quot; y=\&quot;20\&quot; width=\&quot;440\&quot; height=\&quot;270\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-2\&quot; value=\&quot;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;1. Core Entities&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); text-align: center;&amp;quot;&amp;gt;Text Data&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); text-align: center;&amp;quot;&amp;gt;URL metadata&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); text-align: center;&amp;quot;&amp;gt;Domain metadata&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;2. Api&#39;s&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;input will be set of seed urls,&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;output : text data parsed&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;3. Dataflow&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;take seeds url&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;req ip from dns&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;fetch the html&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;extract text&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;store text&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;extract url&#39;s in text and add to queue&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;text-align: left;&amp;quot;&amp;gt;recursive step&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;500\&quot; y=\&quot;20\&quot; width=\&quot;280\&quot; height=\&quot;270\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-3\&quot; value=\&quot;Kafka frontier queue(initialized with seed urls) SQS can be configured as it has retry out of box\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-10\&quot; y=\&quot;720\&quot; width=\&quot;310\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-4\&quot; value=\&quot;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;370\&quot; y=\&quot;690\&quot; width=\&quot;170\&quot; height=\&quot;140\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-5\&quot; value=\&quot;Crawlers(pull urls: extract test and embedded urls)\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;394\&quot; y=\&quot;710\&quot; width=\&quot;176\&quot; height=\&quot;150\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-6\&quot; value=\&quot;DNS\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;170\&quot; y=\&quot;510\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-7\&quot; value=\&quot;Webpage\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;420\&quot; y=\&quot;500\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-10\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.647;entryY=1.04;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;dMYtcgNHhj5xJq3btjqW-4\&quot; target=\&quot;dMYtcgNHhj5xJq3btjqW-6\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;394\&quot; y=\&quot;660\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;444\&quot; y=\&quot;610\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-11\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;dMYtcgNHhj5xJq3btjqW-7\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;440\&quot; y=\&quot;690\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;490\&quot; y=\&quot;640\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-12\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;300\&quot; y=\&quot;750\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;370\&quot; y=\&quot;750\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-13\&quot; value=\&quot;S3 Test data\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;640\&quot; y=\&quot;650\&quot; width=\&quot;170\&quot; height=\&quot;170\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-14\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;dMYtcgNHhj5xJq3btjqW-13\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;570\&quot; y=\&quot;775\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;620\&quot; y=\&quot;725\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-16\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;dMYtcgNHhj5xJq3btjqW-5\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;270\&quot; y=\&quot;910\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;190\&quot; y=\&quot;790\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;230\&quot; y=\&quot;920\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-17\&quot; value=\&quot;Put extracted urls back to&amp;lt;div&amp;gt;queue&amp;lt;/div&amp;gt;\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;dMYtcgNHhj5xJq3btjqW-16\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-39\&quot; y=\&quot;24\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-18\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-70\&quot; y=\&quot;630\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;870\&quot; y=\&quot;630\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-19\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-70\&quot; y=\&quot;970\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;870\&quot; y=\&quot;970\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-20\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-70\&quot; y=\&quot;970\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;-70\&quot; y=\&quot;630\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-21\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;870\&quot; y=\&quot;970\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;870\&quot; y=\&quot;630\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;dMYtcgNHhj5xJq3btjqW-22\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;220\&quot; y=\&quot;970\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;530\&quot; y=\&quot;980\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;350\&quot; y=\&quot;1080\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;diagram id=\&quot;QNJAHbdH4pntQ86KgiFR\&quot; name=\&quot;Page-4\&quot;&gt;&lt;mxGraphModel dx=\&quot;1044\&quot; dy=\&quot;1704\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;827\&quot; pageHeight=\&quot;1169\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-1\&quot; value=\&quot;Client\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;10\&quot; y=\&quot;230\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-2\&quot; value=\&quot;API gateway-&amp;lt;div&amp;gt;routing&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;authorization&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;rate limiting&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;210\&quot; y=\&quot;150\&quot; width=\&quot;120\&quot; height=\&quot;270\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-3\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.444;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-2\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;130\&quot; y=\&quot;270\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;180\&quot; y=\&quot;220\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-4\&quot; value=\&quot;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;414\&quot; y=\&quot;150\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-5\&quot; value=\&quot;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;414\&quot; y=\&quot;350\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-6\&quot; value=\&quot;Profile Service\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;420\&quot; y=\&quot;360\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-20\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-7\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-2\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-7\&quot; value=\&quot;Swipe Service\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;420\&quot; y=\&quot;160\&quot; width=\&quot;120\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-13\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-8\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-7\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-8\&quot; value=\&quot;Swipe Cache\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;595\&quot; y=\&quot;190\&quot; width=\&quot;70\&quot; height=\&quot;70\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-9\&quot; value=\&quot;Profile cache\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;585\&quot; y=\&quot;430\&quot; width=\&quot;75\&quot; height=\&quot;70\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-12\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-10\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-8\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-10\&quot; value=\&quot;Swipe DB&amp;lt;div&amp;gt;Cassandra Db&amp;lt;/div&amp;gt;\&quot; style=\&quot;shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;605\&quot; y=\&quot;60\&quot; width=\&quot;60\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-11\&quot; value=\&quot;Profile&amp;amp;nbsp; DB&amp;lt;div&amp;gt;Postgress&amp;lt;/div&amp;gt;\&quot; style=\&quot;shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;605\&quot; y=\&quot;320\&quot; width=\&quot;60\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-14\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.675;entryY=0.023;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-11\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-9\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-15\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.663;entryY=1.06;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-9\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-6\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-16\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=0.987;exitY=0.468;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-2\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-7\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;360\&quot; y=\&quot;280\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;460\&quot; y=\&quot;280\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-17\&quot; value=\&quot;Swipe\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;ShumXSjpoKMPIiWA2jjT-16\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-21\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=-0.02;entryY=0.627;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-5\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;330\&quot; y=\&quot;340\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;430\&quot; y=\&quot;340\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-22\&quot; value=\&quot;getStack()&amp;lt;div&amp;gt;setProfile&amp;lt;/div&amp;gt;\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;ShumXSjpoKMPIiWA2jjT-21\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-24\&quot; value=\&quot;&amp;lt;br&amp;gt;Swipe service works like the person swapping later should get notification.&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;1. store mapping swipes and send both person you got match none be wiser&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;2. Use cache to load who has swiped somebody before and use it give notif for later person&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;3. Use postgree and we can have extra column in swipe table personAtoB = true and personBtoA = false and since it maintains atomicity second person would get notification&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;4. but since swipe service is write heavy postgress will not be very optimized so we will use cassandra only&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;i style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;[10Mil*100 swipes = 1B swipes&amp;lt;/i&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;i style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp;1bil/100k ~10k swipe per second&amp;lt;/i&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;i style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp;in peak hours ~ 100K swipe per second]&amp;lt;/i&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;5. Why Cassandra is better&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;a. batch writes&amp;lt;br style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;b. append new write (memtable and disktable both)&amp;lt;br style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;c. flush periodically to the end of the file new row&amp;lt;br style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;forced-color-adjust: none; white-space: pre;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;d. periodic compaction occurs old row is deleted smiply in postgress however the flush will go write to that actual page where that data is &amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;contained&amp;amp;nbsp; so getting pointers than disk seek than load change load back if size changes some pointers redistribution might take&amp;lt;span&amp;gt;&amp;amp;nbsp;&amp;lt;/span&amp;gt;place so all &amp;lt;span style=&amp;quot;white-space: pre;&amp;quot;&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;this takes time so its not that write optimized but unlike cassandra give acid it all about the tradeoff we are willing to have&amp;lt;br style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;br style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;forced-color-adjust: none;&amp;quot;&amp;gt;&amp;lt;br style=&amp;quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(236, 236, 236); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&amp;quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;20\&quot; y=\&quot;-330\&quot; width=\&quot;790\&quot; height=\&quot;360\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-25\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;exitX=0.145;exitY=0;exitDx=0;exitDy=4.35;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-11\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-7\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;460\&quot; y=\&quot;284.5\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;560\&quot; y=\&quot;284.5\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-26\&quot; value=\&quot;When match found\&quot; style=\&quot;edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;\&quot; connectable=\&quot;0\&quot; vertex=\&quot;1\&quot; parent=\&quot;ShumXSjpoKMPIiWA2jjT-25\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-27\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=27.5;entryPerimeter=0;exitX=0.143;exitY=1.083;exitDx=0;exitDy=0;exitPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;ShumXSjpoKMPIiWA2jjT-7\&quot; target=\&quot;ShumXSjpoKMPIiWA2jjT-11\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;450\&quot; y=\&quot;240\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;440\&quot; y=\&quot;320\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-28\&quot; value=\&quot;Swipe&amp;lt;div&amp;gt;- user1&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;-user2&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;- like yes&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;created at&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;690\&quot; y=\&quot;80\&quot; width=\&quot;90\&quot; height=\&quot;120\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-29\&quot; value=\&quot;profile:&amp;lt;div&amp;gt;name&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;minAgePref&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;maxAgePref&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;gender&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;genderPref&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;maxdistance&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;currentLocation&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;690\&quot; y=\&quot;350\&quot; width=\&quot;100\&quot; height=\&quot;140\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;ShumXSjpoKMPIiWA2jjT-30\&quot; value=\&quot;Match:&amp;lt;div&amp;gt;user1&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;user2&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;createdAt&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;630\&quot; y=\&quot;525\&quot; width=\&quot;80\&quot; height=\&quot;85\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;&quot;,&quot;toolbar&quot;:&quot;pages zoom layers lightbox&quot;,&quot;page&quot;:3}"></div>
<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="https://app.diagrams.net/#Hviveknitrr2021%2FCountDownTimer%2Fmain%2FUntitled%20Diagram.drawio.html#%7B%22pageId%22%3A%22QNJAHbdH4pntQ86KgiFR%22%7D" target="_blank"><img border="0" src="https://app.diagrams.net/images/drawlogo128.png"/></a>
</body>
</html>
